<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:utils="http://java.sun.com/jsf/composite/components/utils">
	<p:panel header="#{viewBundle['Profile.Service.Panel.Title']}">
		<div class="section hc-overlay-form-fields-container clearfix">
			<p:fieldset styleClass="col-md-12"
				legend="#{viewBundle['Profile.Data.Services.Label']}"
				toggleable="true" toggleSpeed="500">
				<p:selectManyCheckbox id="userTypes" label="Servicios"
					value="#{profileEditPage.user.userTypes}"
					styleClass="hc-selectManyChkbox" converter="userTypeConverter"
					layout="responsive" columns="2">
					<f:selectItems value="#{applicationContext.userTypes}"
						var="userType"
						itemLabel="#{userType.userTypeName.getText(webSession.currentLanguage)}"
						itemValue="#{userType}">
					</f:selectItems>
					<p:ajax event="change" process="@this"
						update="advanced-services-area" />
				</p:selectManyCheckbox>
				<p:tooltip id="toolTip0" for="userTypes"
					value="#{viewBundle['Tooltip.Profile.UserTypesHelp']}" />
			</p:fieldset>
		</div>

		<h:panelGroup id="advanced-services-area">
			<h:panelGroup rendered="#{not empty profileEditPage.user.userTypes}">
				<div class="section hc-overlay-form-fields-container clearfix">
					<div class="row">
						<div class="col-md-3">
							<div class="row">
								<span id="imageUrl"> 
									<utils:imageEditor
										imageUrl="#{profileEditPage.user.image}" 
										imageType="userImage"
										editLabel="#{viewBundle['Image.Edition']}" />
								</span>
							</div>
							<div class="row hc-info-content-profile">
								<div class="col-md-12">
									<b><p:outputLabel styleClass="hc-form-label"
											value="#{viewBundle['Profile.Data.Country.Label']}"
											for="countryName" /></b>
								</div>
								<div class="col-md-12">
									<h:selectOneMenu id="countryName" styleClass="hc-form-field"
										value="#{profileEditPage.user.country}"
										converter="countryConverter">
										<f:selectItem itemLabel="#{viewBundle['Profile.Data.SelectCountry']}" />
										<f:selectItems value="#{applicationContext.countries}"
											var="country"
											itemLabel="#{profileEditPage.getCountryName(country)}"
											itemValue="#{country}" />
										<p:ajax event="change"
											listener="#{profileEditPage.processCountrySelect}"
											process="@this" update="stateName,cityName">
										</p:ajax>
									</h:selectOneMenu>
								</div>
								<div class="col-md-12">
									<b><p:outputLabel styleClass="hc-form-label"
											value="#{viewBundle['Profile.Data.State.Label']}"
											for="stateName" /></b>
								</div>
								<div class="col-md-12">
									<h:selectOneMenu id="stateName" styleClass="hc-form-field"
										value="#{profileEditPage.user.state}"
										converter="stateConverter">
										<f:selectItem itemLabel="#{viewBundle['Profile.Data.SelectState']}" />
										<f:selectItems value="#{profileEditPage.states}" var="state"
											itemLabel="#{profileEditPage.getStateName(state)}"
											itemValue="#{state}" />
										<p:ajax event="change"
											listener="#{profileEditPage.processStateSelect}"
											process="@this" update="cityName">
										</p:ajax>
									</h:selectOneMenu>
								</div>
								<div class="col-md-12">
									<b><p:outputLabel styleClass="hc-form-label"
											value="#{viewBundle['Profile.Data.City.Label']}"
											for="cityName" /></b>
								</div>
								<div class="col-md-12">
									<h:selectOneMenu id="cityName" styleClass="hc-form-field"
										value="#{profileEditPage.user.city}" converter="cityConverter">
										<f:selectItem itemLabel="#{viewBundle['Profile.Data.SelectCity']}" />
										<f:selectItems value="#{profileEditPage.cities}" var="city"
											itemLabel="#{profileEditPage.getCityName(city)}"
											itemValue="#{city}" />
									</h:selectOneMenu>
								</div>
								<div class="col-md-12">
									<span class="hc-form-across-label">#{viewBundle['Profile.Data.Telephone.Label']}</span>
								</div>
								<div class="col-md-12">
									<utils:telephoneNumberEditor
										value="#{profileEditPage.user.telephone}" id="telephone" />
								</div>
								<div class="col-md-12">

									<b><p:outputLabel styleClass="hc-form-label"
											value="#{viewBundle['Profile.Data.Website.Label']}"
											for="websiteName" /></b>
								</div>
								<div class="col-md-12">
									<h:inputText id="websiteName" styleClass="hc-form-field"
										value="#{profileEditPage.user.webSite}" />
								</div>
								<div class="col-md-12">
									<b><p:outputLabel styleClass="hc-form-label"
											value="#{viewBundle['Profile.Data.Linkedin.Label']}"
											for="lkdinName" /></b>
								</div>
								<div class="col-md-12">
									<h:inputText id="lkdinName" styleClass="hc-form-field"
										value="#{profileEditPage.user.linkedIn}" />
									<p:tooltip id="toolTip1" for="lkdinName"
										value="#{viewBundle['Tooltip.Profile.LinkedInHelp']}" />
								</div>
								<div class="col-md-12">
									<b><p:outputLabel styleClass="hc-form-label"
											value="#{viewBundle['Profile.Data.Skype.Label']}"
											for="skypeName" /></b>
								</div>
								<div class="col-md-12">
									<h:inputText id="skypeName" styleClass="hc-form-field"
										value="#{profileEditPage.user.skype}" />
									<p:tooltip id="toolTip2" for="skypeName"
										value="#{viewBundle['Tooltip.Profile.SkypeHelp']}" />
								</div>
							</div>
						</div>
						<div class="col-md-9">
							<p:fieldset
								legend="#{viewBundle['Profile.Data.Languages.Label']}"
								toggleable="true" toggleSpeed="500">
								<h:panelGroup layout="block"
									styleClass="hc-manycheckbox-three-columns hc-selectManyChkbox">
									<p:selectManyCheckbox id="spokenLanguages" label="Lenguajes"
										value="#{profileEditPage.user.spokenLanguages}"
										layout="responsive" required="true"
										converter="languageConverter" columns="3">
										<f:selectItems value="#{profileEditPage.languages}"
											var="language" itemLabel="#{language.languageName}"
											itemValue="#{language}">
										</f:selectItems>
										<f:ajax
											listener="#{profileEditPage.processLanguagesSelectedChange}"
											render="user-description-section  main-language-section"
											immediate="true" />
									</p:selectManyCheckbox>
								</h:panelGroup>
							</p:fieldset>
						</div>

					</div>
				</div>
				<hr />

				<div class="col-md-4">
					<h:panelGroup layout="block"
						styleClass="section hc-overlay-form-fields-container clearfix"
						id="main-language-section">
						<b> <h:outputLabel styleClass="hc-form-label"
								for="#{mainSpokenLanguage}"
								label="#{viewBundle['Profile.Data.Languages.MainLanguage.Label']}"
								value="#{viewBundle['Profile.Data.Languages.MainLanguage.Label']}">
							</h:outputLabel>
						</b>
						<span> <h:selectOneMenu id="mainSpokenLanguage"
								styleClass="hc-form-field"
								value="#{profileEditPage.user.mainSpokenLanguage}"
								label="#{viewBundle['Profile.Data.Languages.MainLanguage.Label']}"
								converter="languageConverter">
								<f:selectItems value="#{profileEditPage.user.spokenLanguages}"
									var="language" itemLabel="#{language.languageName}"
									itemValue="#{language}" />
							</h:selectOneMenu>
						</span>
					</h:panelGroup>
				</div>
				<div class="col-md-12">
					<h:panelGroup layout="block"
						styleClass="section hc-overlay-form-fields-container clearfix"
						id="user-description-section">
						<c:forEach items="#{profileEditPage.user.spokenLanguages}"
							var="lang">
							<div class="col-md-12">
								<b> <h:outputLabel styleClass="hc-form-label" for="#{lang}"
										value="#{viewBundle['Profile.Data.Description.Label']} ( #{lang.languageName} )">
									</h:outputLabel>
								</b>
							</div>
							<div class="col-md-12">
								<span> <p:inputTextarea rows="10" id="#{lang}" cols="30"
										label="#{viewBundle['Profile.Data.Description.Label']} ( #{lang.languageName} )"
										value="#{profileEditPage.user.userDescription.langMap[lang]}"
										maxlength="800" styleClass="hc-input-text-area"
										counterTemplate="{0} characters remaining." autoResize="false">
										<f:validateLength minimum="20" />
									</p:inputTextarea>
								</span>
							</div>
						</c:forEach>
					</h:panelGroup>
				</div>
			</h:panelGroup>
		</h:panelGroup>
	</p:panel>
</ui:composition>
