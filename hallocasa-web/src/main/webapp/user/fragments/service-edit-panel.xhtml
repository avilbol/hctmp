<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <p:panel header="#{viewBundle['Profile.Service.Panel.Title']}" 
             >
        <div class="section hc-overlay-form-fields-container clearfix">

            <div class="col span_1_of_3">
                <p:outputLabel 
                    styleClass="hc-form-label"
                    value="#{viewBundle['Profile.Data.Country.Label']}" 
                    for="countryName" />
                <p:selectOneMenu
                    id="countryName" 
                    styleClass="hc-form-field"
                    var="country"
                    value="#{profileEditPage.user.country}" 
                    completeMethod="#{profileEditPage.countries}">
                    <
                    <h:outputText value="#{country.countryName}" />
                    <p:ajax 
                        event="itemSelect" 
                        listener="#{profileEditPage.processCountrySelect()}"
                        process="@this"
                        update="stateName">
                    </p:ajax>
                </p:autoComplete>
                <br/>
                
                <p:outputLabel 
                    styleClass="hc-form-label"
                    value="#{viewBundle['Profile.Data.State.Label']}" 
                    for="stateName" />
                <p:autoComplete 
                    id="stateName" 
                    forceSelection="true"
                    var="state"
                    styleClass="hc-form-field"
                    value="#{profileEditPage.user.state}" 
                    completeMethod="#{profileEditPage.states}">
                    <h:outputText value="#{state.stateName}" />
                    
                </p:autoComplete>
                <br/>

                <p:outputLabel 
                    styleClass="hc-form-label"
                    value="#{viewBundle['Profile.Data.City.Label']}" 
                    for="cityName" />
                <p:inputText id="cityName" value="#{profileEditPage.user.city}" required="true"
                             requiredMessage="Debe especificar la ciudad"/>
                <br/>
              
                <p:outputLabel 
                    styleClass="hc-form-label"
                    value="#{viewBundle['Profile.Data.Website.Label']}" 
                    for="websiteName" />
                <p:inputText 
                    id="websiteName" 
                    value="#{profileEditPage.user.webSite}" />
                <br/>
                
                <p:outputLabel 
                    styleClass="hc-form-label"
                    value="#{viewBundle['Profile.Data.Linkedin.Label']}" 
                    for="lkdinName" />
                <p:inputText 
                    id="lkdinName" 
                    value="#{profileEditPage.user.linkedIn}" />
                <br/>
                
                <p:outputLabel 
                    styleClass="hc-form-label"
                    value="#{viewBundle['Profile.Data.Skype.Label']}" 
                    for="skypeName" />
                <p:inputText 
                    id="skypeName" 
                    value="#{profileEditPage.user.skype}" />
            </div>

            <div class="col span_1_of_3" >
                <span class="hc-form-label">#{viewBundle['Profile.Data.Languages.Label']}</span>
                <p:selectManyCheckbox
                    id="spokenLanguages" 
                    value="#{profileEditPage.user.spokenLanguages}"
                    columns="3">
                    <f:selectItems 
                        value="#{profileEditPage.languages}" 
                        var="language" 
                        itemLabel="#{languageName}" 
                        itemValue="#{languageName}">
                    </f:selectItems>
                </p:selectManyCheckbox>
            </div>

            <div class="col span_1_of_3" >
                <span class="hc-form-label">#{viewBundle['Profile.Data.Services.Label']}</span>
                <ui:repeat value="#{profileReadPage.user.userTypes}" var="userType">
                    <h:outputText value="#{userType.userTypeName.getText(webSession.currentLanguage)}"/><br/>
                </ui:repeat>
            </div>
        </div>
        <hr/>
        
        <h:panelGroup 
            layout="block" 
            styleClass="section hc-overlay-form-fields-container clearfix"
            id="user-description-section">
            <ui:repeat value="#{applicationContext.languages}" var="lang">
                <span class="hc-form-label">#{viewBundle['Profile.Data.Description.Label']} ( #{lang.languageName} )</span>
                <span>
                    <p:inputTextarea 
                        rows="10" 
                        cols="30" 
                        value="#{userDescription[lang]}"
                        maxlength="300" 
                        counterTemplate="{0} characters remaining." 
                        autoResize="false" />
                </span>
            </ui:repeat>
        </h:panelGroup>
        
    </p:panel>

</ui:composition>
