<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:cc="http://java.sun.com/jsf/composite"
	xmlns:utils="http://java.sun.com/jsf/composite/components/utils">
	<cc:interface componentType="profileEntryComponent">
		<cc:attribute name="value" type="com.hallocasa.commons.vo.UserVO"
			shortDescription="Profile to show" />
		<cc:attribute name="size" type="java.lang.Integer" default="200"
			shortDescription="profile entry size" />
		<cc:attribute name="language" type="com.hallocasa.commons.Language"
			default="en" shortDescription="Language to view user data" />
		<cc:attribute name="presentation" type="java.lang.String"
			default="lite" shortDescription="Mode to organize the component" />
		<cc:attribute name="onClick" required="true"
			method-signature="void action(com.hallocasa.commons.vo.UserVO)"
			shortDescription="action to execute when click" />
	</cc:interface>
	<cc:implementation>
		<h:outputScript>
	    	function doClick(id){
	    		if(#{cc.attrs.presentation.equals(cc.completePresentation)}){
	    			$('#' + id.split(':').join('\\:')).click();
	    		}
	    	}
    	</h:outputScript>
		<f:event type="preRenderComponent" listener="#{cc.initialize}" />
		<h:outputStylesheet library="css" name="modules/profile/browse.css" />

		<h:panelGroup id="profile-entry-container">

			<h:commandLink binding="#{cc.commandLink}">
				<f:ajax listener="#{cc.attrs.onClick}"></f:ajax>
				<f:param name="user" value="#{cc.profile}"></f:param>
			</h:commandLink>
				<div class="hc-card-profile hc-profile-browse-panel-#{cc.attrs.presentation}"
					onclick="doClick('#{cc.commandLink.clientId}')">
			<div class="card-content hc-profile-browse-cell">
					<div class="card-image">
					<div class="sub-card">
						<utils:imageEditor imageUrl="#{cc.profile.image}"
							imageType="userImage" readOnly="true" />
					</div>
					</div>
					<div class="card-info">
					<div class="card-info-content">
					<div class="sub-card">
							<b> <h:outputText value="#{cc.cityName}">
								</h:outputText>
							</b>
						</div>
					<div class="sub-card">
							<b> <h:outputText
									value="#{cc.profile.firstName} #{cc.profile.lastName}">
								</h:outputText>
							</b>
						</div>
							<ui:repeat value="#{cc.loadSpokenLanguageList()}"
								var="spokenLanguage">
								<div class="sub-card">
									#{spokenLanguage.languageName}</div>
								<div class="sub-card">
								#{cc.loadAdditionalLanguagesMark()}</div>
							</ui:repeat>
					<div class="sub-card">
							<ui:fragment
								rendered="#{cc.attrs.presentation.equals(cc.litePresentation)}">
								<h:commandButton styleClass="btn btn-default"
									actionListener="#{cc.attrs.onClick}"
									value="#{viewBundle['PublicProfile.Widget.ViewMore']}" />
							</ui:fragment>
							</div>
					<div class="sub-card">
						<ui:repeat value="#{cc.profile.userTypes}" var="userType">
							<div style="display: block">#{cc.load(userType)}</div>
						</ui:repeat>
					</div>
					</div>
					<div class="card-description">
					<div class="sub-card">
						<p><h:outputText
							value="#{viewBundle['PublicProfile.BrowseProfiles.Description']}" /></p>
						<p>#{cc.loadDescription()}</p>
					</div>
					</div>
					</div>
				</div>
			</div>
		</h:panelGroup>
	</cc:implementation>
</ui:composition>