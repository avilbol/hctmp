<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:cc="http://java.sun.com/jsf/composite">
    <cc:interface componentType="telephoneNumberComponent">
        <cc:attribute name="id"
                      type="java.lang.String"
                      shortDescription="id"/>
        <cc:attribute name="value"
                      type="com.hallocasa.commons.vo.TelephoneVO"
                      shortDescription="Telephone number"/>
        <cc:attribute name="readOnly"
                      type="java.lang.Boolean"
                      default="false"
                      shortDescription="Indicates telephone only must be showed, but not edited"/>
    </cc:interface>
    <cc:implementation>
    	<f:event type="postAddToView" listener="#{cc.onPreRender}"/>
    		
    	<ui:fragment rendered="#{not cc.attrs.readOnly}">
    		<p:autoComplete 
	    	 	id="#{cc.attrs.id}-prefix-telephone"
	    	 	value="#{cc.attrs.value.countryTelephonePrefix}" 
	    	 	completeMethod="#{cc.completeText}"
	    	 	var="prefixItem" style="width:20%;display:inline"
	    	 	itemLabel="#{cc.loadItemLabel(prefixItem)}"
	    	 	itemValue="#{prefixItem}" 
	    	 	forceSelection="true"
	    	 	maxResults="10"
	    	 	queryDelay="700"
	    	 	converter="countryTelephonePrefixConverter"/>
        	<p:watermark for="#{cc.attrs.id}-prefix-telephone" 
        		value="#{viewBundle['Common.TelephoneNumber.Prefix']}" 
        		id="#{cc.attrs.id}-tnumber_watermark" />
        	<h:inputText value="#{cc.attrs.value.number}"></h:inputText>
    	</ui:fragment>
        <ui:fragment rendered="#{cc.attrs.readOnly}">
        	<h:outputText
        		value="(#{cc.attrs.value.countryTelephonePrefix.prefix} - 
        				#{cc.attrs.value.countryTelephonePrefix.name}) 
        				#{cc.attrs.value.number}"
        		rendered="#{not (cc.attrs.value eq null)}"></h:outputText>
        	<h:outputText
        		value="No establecido"
        		rendered="#{cc.attrs.value eq null}"></h:outputText>
    	</ui:fragment>
    	
    </cc:implementation>
</ui:composition>