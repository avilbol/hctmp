<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:cc="http://java.sun.com/jsf/composite">
    <cc:interface componentType="FilterStatusComponent">
        <cc:attribute name="value"
                      type="com.hallocasa.view.components.general.filtermenu.FilterMenuModel" 
                      shortDescription="Data model for the filter. It must be the same object 
                      used by the FilterMenu associated to this status"
                      required="true"/>
        <cc:attribute name="filterMenu"
                      type="java.lang.String" 
                      shortDescription="The id of the FilterMenu component associated to this 
                      status"
                      required="true"/>
        <cc:attribute name="filterChangeUpdate"
                      type="java.lang.String" 
                      shortDescription="Id or ids to update after the filter change event"
                      required="false"/>

        filterChangeUpdate
    </cc:interface>

    <cc:implementation>
        <div id="#{cc.id}">
            <h:panelGroup id="conditionsContainer">
                <ui:repeat value="#{cc.attrs.value.activeMenuItemConditions}" var="condition">
                    <div class="filter-status-cloud" id="condition">
                        <span>
                            #{condition.filterMenuItem.title} : #{condition.label}
                        </span>
                        <p:commandLink actionListener="#{cc.onConditionRemoveClick}" update=":#{cc.fullIdPath}:conditionsContainer,#{cc.attrs.filterMenu},#{cc.attrs.filterChangeUpdate}">
                            <img src="#{resource['images:icons/delete_16.png']}"/>
                            <f:attribute name="condition" value="#{condition}"/>
                        </p:commandLink>
                    </div>
                </ui:repeat>
            </h:panelGroup>
        </div>
    </cc:implementation>

</ui:composition>