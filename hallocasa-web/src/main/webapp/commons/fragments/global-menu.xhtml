<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <h:form id="global-menu">
        <ul class="hc-header-global-menu ui-corner-all js-header-global-menu">
            <li class="hc-header-global-menu-item">
                <a href="https://qtrial2014az1.az1.qualtrics.com/SE/?SID=SV_ebnBo4onZ6fv8pL"
                   target="_blank">
                    <span>#{viewBundle['Common.Label.GiveFeedback']}</span>
                </a>
            </li>
            <li class="hc-header-global-menu-item">
                <a href="#{constants.getAbsolutePageUrl('BLOG_INDEX')}">
                    <span>#{viewBundle['Common.Label.Blog']}</span>
                </a>
            </li>
            <li class="hc-header-global-menu-item">
                <a href="#{constants.getAbsolutePageUrl('LINKS')}">
                    <span>#{viewBundle['Common.Label.Links']}</span>
                </a>
            </li>
            <li class="hc-header-global-menu-item">
                <a href="#{constants.getAbsolutePageUrl('BUYING_PROCESS')}">
                    <span>#{viewBundle['Common.Label.BuyingProcess']}</span>
                </a>
            </li>
            <li class="hc-header-global-menu-item hc-header-menu">

                <h:panelGroup id="languageMenuTrigger"
                              styleClass="fa" class="language-link">
                    <span class="hc-simple-link">#{webSession.currentLanguage.languageName}</span>
                </h:panelGroup>

                <p:menu overlay="true" my="left top" trigger="languageMenuTrigger"
                        widgetVar="languageMenuWv" at="left bottom" styleClass="hc-header-menu-overlay hc-header-language-menu-overlay" >
                    <p:submenu label="Language Selection">
                        <p:menuitem value="English"
                                    immediate="true"
                                    onclick="window.location.href = updateQueryStringParameter(window.location.href, 'lang', 'en');"/>
                        <p:menuitem value="EspaÃ±ol"
                                    immediate="true"
                                    onclick="window.location.href = updateQueryStringParameter(window.location.href, 'lang', 'es');"/>
                        <p:menuitem value="Deutsch"
                                    immediate="true"
                                    onclick="window.location.href = updateQueryStringParameter(window.location.href, 'lang', 'de');"/>
                    </p:submenu>
                </p:menu>
            </li>
        </ul>

        <ul class="hc-header-global-toolbar">
            <ui:fragment rendered="#{!globalMenuBean.logged}">
                <li class="hc-header-global-menu-item">
                    <p:commandButton onclick="PF('signup-dialog').show();
                            PF('signup-dialog').initPosition();"
                                     type="button"
                                     value ="#{viewBundle['Header.SignUp.Button']}"/>
                </li>
                <li class="hc-header-global-menu-item">
                    <p:commandButton onclick="PF('login-dialog').show();
                            PF('login-dialog').initPosition();"
                                     type="button"
                                     value ="#{viewBundle['Header.Login.Button']}"/>
                </li>
            </ui:fragment>
            <ui:fragment  rendered="#{globalMenuBean.logged}">
                <li class="hc-header-global-menu-item hc-header-menu">
                    <h:panelGroup id="profileTrigger"
                                  styleClass="fa" class="menu-link hc-simple-link">
                        <h:graphicImage library="images" name="app_images/user_male_16.png"/>
                        <h:outputText value="#{globalMenuBean.username}"/>
                    </h:panelGroup>

                    <p:menu 
                        overlay="true" 
                        my="left top" 
                        trigger="profileTrigger"
                        widgetVar="profileMenuWv" 
                        at="left bottom"
                        styleClass="hc-header-menu-overlay hc-header-profile-menu-overlay" >
                        <p:submenu label="Options">
                            <p:menuitem value="#{viewBundle['GlobalMenu.GoToProfile']}"
                                        immediate="true"
                                        actionListener="#{globalMenuBean.processGoToProfile}"/>
                            <p:menuitem value="#{viewBundle['Header.Logout.Button']}"
                                        immediate="true"
                                        actionListener="#{globalMenuBean.processLogoutClick}"/>
                        </p:submenu>
                    </p:menu>
                </li>
            </ui:fragment>
            <li class="hc-header-global-menu-item hc-header-global-menu-item-mobile-button">
                <p:commandButton value="Menu" styleClass="js-header-global-mobile-button"
                                 icon="ui-icon-menu-16x16"/>
            </li>
        </ul>
    </h:form>

    <ui:include src="/access/fragments/signup-dialog.xhtml" />
    <ui:include src="/access/fragments/login-dialog.xhtml" />
    <ui:include src="/access/fragments/password-recovery-dialog.xhtml" />
    <ui:include src="/access/fragments/password-retype-dialog.xhtml" />
</ui:composition>

