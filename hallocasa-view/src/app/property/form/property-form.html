<md-dialog aria-label="property form" flex="80">
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h2>{{vm.title | translate}}</h2>
      <span flex></span>
      <md-button class="md-icon-button" ng-click="vm.closeDialog()">
        <i class="material-icons">close</i>
      </md-button>
    </div>
  </md-toolbar>

  <form
    name="createPropertyForm"
    ng-submit="vm.save()"
    form-validation
    tab-list="vm.fieldsRender"
    novalidate
  >
    <md-dialog-content>
      <md-content class="md-padding">
        <div ng-show="vm.currentState === vm.state.WIZARD_1">
          <ng-include src="'app/property/form/tabs/property-information.html'"></ng-include>
        </div>

        <div ng-show="vm.currentState === vm.state.WIZARD_2">
          <md-tabs md-dynamic-height md-border-bottom>
            <md-tab ng-repeat="tab in vm.fieldsRender" label="{{tab.lang | translate}}" ng-click="vm.handleTemplateLocation(tab.name)" md-active="tab.isActive" md-on-deselect="tab.isActive = false">
              <ng-form name="{{tab.name}}">
                <fields-interpreter
                  field-list="tab.fieldList"
                  form-name="tab.name"
                  field-root-scope="vm.fieldsRender"
                  additional-parameters="vm.formatedPropertyDeterminants"
                  flex
                ></fields-interpreter>
              </ng-form>
            </md-tab>
          </md-tabs>

          <div>
            <md-button ng-click="vm.changeState(vm.state.WIZARD_1)">{{'Properties.wizard.back.label' | translate}}</md-button>
            <md-button ng-click="vm.closeDialog()">{{'Properties.wizard.cancel.label' | translate}}</md-button>
            <md-button type="submit" ng-if="!vm.isReadOnly">{{'property.wizard.save' | translate}}</md-button>
          </div>
        </div>
      </md-content>
    </md-dialog-content>
  </form>
</md-dialog>
