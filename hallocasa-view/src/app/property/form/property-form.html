<md-dialog aria-label="property form" flex="80">
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h2>{{vm.title | translate}}</h2>
      <span flex></span>
      <md-button class="md-icon-button" ng-click="vm.closeDialog()">
        <i class="material-icons">close</i>
      </md-button>
    </div>
  </md-toolbar>

  <form
    name="propertyForm"
    ng-submit="propertyForm.$valid && vm.save()"
    form-validation
    tab-list="vm.fieldsRender"
    novalidate
  >
    <md-dialog-content>
      <md-content class="md-padding">
        <div ng-show="vm.currentState === vm.state.WIZARD_1">
          <ng-include src="'app/property/form/tabs/property-information.html'"></ng-include>
        </div>

        <div ng-show="vm.currentState === vm.state.WIZARD_2">
          <md-tabs md-dynamic-height md-border-bottom>
            <md-tab
              ng-repeat="tab in vm.fieldsRender"
              label="{{tab.lang | translate}}"
              ng-click="vm.handleTabLocation(tab.name, $index)"
              md-active="tab.isActive"
              md-on-deselect="tab.isActive = false"
              md-swipe-content
              md-center-tabs
            >
              <ng-form name="{{tab.name}}">
                <fields-interpreter
                  field-list="tab.fieldList"
                  form-name="tab.name"
                  field-root-scope="vm.fieldsRender"
                  additional-parameters="vm.formatedPropertyDeterminants"
                  readonly="false"
                  flex
                ></fields-interpreter>
              </ng-form>
            </md-tab>
          </md-tabs>

          <div>
            <md-button ng-click="vm.closeDialog()">{{'Properties.wizard.cancel.label' | translate}}</md-button>
            <md-button ng-click="vm.changeTab('Back')" ng-disabled="vm.previousDisabled" ng-if="!vm.editMode">
              {{'Common.Label.Back' | translate}}
            </md-button>
            <md-button ng-click="vm.changeTab('Next')" ng-disabled="vm.nextDisabled" ng-if="!vm.editMode">
              {{'Common.Label.Next' | translate}}
            </md-button>
            <md-button type="submit" ng-if="vm.showSubmit">
              {{'property.wizard.save' | translate}}
            </md-button>
          </div>
        </div>
      </md-content>
    </md-dialog-content>
  </form>
</md-dialog>
